<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Etikett Drucken</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #dcdcdc;
      display: flex;
      flex-direction: column;
      height: 100vh;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    .preview-wrapper {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .preview-area {
      width: 210mm;
      height: 148mm;
      background: white;
      padding: 8mm;
      box-sizing: border-box;
      transform: scale(0.45);
      transform-origin: center;
      box-shadow: 0 0 12px rgba(0,0,0,0.25);

      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    .etikett {
      width: 210mm;
      height: 148mm;
      position: relative;
      background: white;
      padding: 8mm;
      box-sizing: border-box;

      display: flex;
      justify-content: center;
      align-items: center;
    }

    .textblock {
      text-align: center;
      width: 100%;
    }

    .logo-wrapper {
      position: absolute;
      right: 10mm;
      bottom: 10mm;
    }

    .logo-wrapper img {
      width: 42mm;
      height: auto;
    }

    .bottom-bar {
      display: flex;
      gap: 10px;
      padding: 10px;
      background: #ffffff;
      box-shadow: 0 -3px 6px rgba(0,0,0,0.25);
    }

    .btn {
      flex: 1;
      padding: 16px 10px;
      font-size: 20px;
      border-radius: 10px;
      border: none;
      font-weight: bold;
      color: white;
      outline: none;
    }

    .btn:focus {
      outline: 5px solid #1a73e8; /* blauer Fokus */
    }

    .back-btn { background: #9e9e9e; }
    .print-btn { background: #2e7d32; }

    @media print {
      .bottom-bar, .preview-wrapper { display: none !important; }
      #printArea { display: flex !important; }
      @page { size: A5 landscape; margin: 0; }
      body { background: white !important; }
    }
  </style>
</head>

<body>

<div class="preview-wrapper">
  <div class="preview-area">
    <div id="previewContent" class="textblock"></div>

    <div class="logo-wrapper">
      <img src="langen.png" />
    </div>
  </div>
</div>

<div id="printArea" class="etikett" style="display:none;">
  <div id="printContent" class="textblock"></div>

  <div class="logo-wrapper">
    <img src="langen.png" />
  </div>
</div>

<div class="bottom-bar">
  <button class="btn back-btn" id="backBtn">â—€ ZurÃ¼ck</button>
  <button class="btn print-btn" id="printBtn">Drucken</button>
</div>

<script>
window.onload = () => {

  /* ========= DATEN HOLEN ========= */
  const url = new URLSearchParams(location.search);
  let data = {};

  if (url.has("data")) {
    data = JSON.parse(decodeURIComponent(url.get("data")));
  }

  const beistell = data.beistell || "";
  const type     = data.selectedType || "";
  const kunde    = data.kundename || "";

  /* ========= ETIKETT AUFBAUEN ========= */

  let html = "";

  html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">${beistell}</div>`;

  switch(type) {
    case "LP":
      html += `<div style="font-size:60pt; font-weight:bold;">L&P</div>`;
      break;

    case "LPEILT":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">L&P</div>`;
      html += `<div style="font-size:60pt; font-weight:bold;">â€žEILT SEHRâ€œ</div>`;
      break;

    case "SCHUETTE":
      html += `<div style="font-size:60pt; font-weight:bold;">SchÃ¼tte</div>`;
      break;

    case "SCHUETTEEILT":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">SchÃ¼tte</div>`;
      html += `<div style="font-size:60pt; font-weight:bold;">â€žEILT SEHRâ€œ</div>`;
      break;

    case "KLEY":
      html += `<div style="font-size:60pt; font-weight:bold;">Kleymann</div>`;
      break;

    case "KLEYEILT":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Kleymann</div>`;
      html += `<div style="font-size:60pt; font-weight:bold;">â€žEILT SEHRâ€œ</div>`;
      break;

    case "COMTEZN8":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Comte</div>`;
      html += `<div style="font-size:32pt; font-weight:bold;">â€žZn8â€œ</div>`;
      break;

    case "COMTEZNI8":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Comte</div>`;
      html += `<div style="font-size:32pt; font-weight:bold;">â€žZNi8â€œ</div>`;
      break;

    case "CHEMISCH":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Comte</div>`;
      html += `<div style="font-size:32pt; font-weight:bold;">â€žChemisch Vernickelnâ€œ</div>`;
      break;

    case "DICK":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Comte</div>`;
      html += `<div style="font-size:32pt; font-weight:bold;">â€žDickschichtpassivierungâ€œ</div>`;
      break;

    case "BLAU":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Comte</div>`;
      html += `<div style="font-size:32pt; font-weight:bold;">â€žBlau ZN8â€œ</div>`;
      break;

    case "PENTZ":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Pentz & Gerdes</div>`;
      html += `<div style="font-size:32pt; font-weight:bold;">â€žZN8â€œ</div>`;
      break;

    case "RCS":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">RCS</div>`;
      html += `<div style="font-size:32pt; font-weight:bold;">â€žSchweiÃŸenâ€œ</div>`;
      break;

    case "COATINC":
      html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Coatinc 24</div>`;
      html += `<div style="font-size:32pt; font-weight:bold;">â€žVerzinkenâ€œ</div>`;
      break;
  }

  if (kunde) {
    html += `<div style="font-size:32pt; margin-top:6mm;">(${kunde})</div>`;
  }

  document.getElementById("previewContent").innerHTML = html;
  document.getElementById("printContent").innerHTML   = html;

  /* ============================================================
     ðŸ”µ BEIM Ã–FFNEN: AUTOMATISCH DRUCKEN-BUTTON FOKUSIEREN
  ============================================================ */
  setTimeout(() => {
    document.getElementById("printBtn").focus();
  }, 150);

  /* ============================================================
     PFEIL NAVIGATION
  ============================================================ */

  const backBtn = document.getElementById("backBtn");
  const printBtn = document.getElementById("printBtn");

  backBtn.addEventListener("keydown", (e) => {
    if (e.key === "ArrowRight") {
      e.preventDefault();
      printBtn.focus();
    }
    if (e.key === "Enter") {
      e.preventDefault();
      resetInputs();
      history.back();
    }
  });

  printBtn.addEventListener("keydown", (e) => {
    if (e.key === "ArrowLeft") {
      e.preventDefault();
      backBtn.focus();
    }
    if (e.key === "Enter") {
      e.preventDefault();
      window.print();
    }
  });

  /* ============================================================
     ðŸ”„ Eingaben lÃ¶schen
  ============================================================ */
  function resetInputs() {
    sessionStorage.removeItem("beistellInput");
    sessionStorage.removeItem("kundeInput");
  }

  /* Button Klicks */
  backBtn.onclick = () => {
    resetInputs();
    history.back();
  };

  printBtn.onclick = () => window.print();

};
</script>

</body>
</html>
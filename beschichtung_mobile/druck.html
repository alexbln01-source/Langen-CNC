<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Druck</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: #dcdcdc;
    font-family: Arial, sans-serif;
    overflow: hidden;
}

/* ======== OBERE LEISTE ======== */
#topBar {
    height: 70px;
    padding: 8px 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #ffffff;
    box-shadow: 0 0 6px rgba(0,0,0,0.20);
}

.btn {
    flex: 1;
    margin: 0 6px;
    height: 50px;
    font-size: 20px;
    border: none;
    border-radius: 10px;
    color: #fff;
    font-weight: bold;
}
#cancelBtn { background: #c62828; }
#printBtn  { background: #1565c0; }

/* ======== VORSCHAU ======== */
#previewWrapper {
    height: calc(100% - 70px);
    display: flex;
    justify-content: center;
    align-items: center;
}

#previewArea {
    width: 210mm;
    height: 148mm;
    background: #ffffff;
    padding: 8mm;
    box-sizing: border-box;

    transform: scale(0.45);
    transform-origin: center center;

    box-shadow: 0 0 15px rgba(0,0,0,0.35);

    display: flex;
    justify-content: center; /* NICHT vertikal */
    align-items: center;
    position: relative;
}

/* ======== DRUCKBEREICH ======== */
#printArea {
    display: none;
}

.etikett {
    width: 210mm;
    height: 148mm;
    background: #ffffff;
    padding: 8mm;
    box-sizing: border-box;

    display: flex;
    justify-content: center; /* NICHT vertikal */
    align-items: center;
    position: relative;
}

/* ====================================
   ZENTRIERTER TEXTBLOCK (WICHTIG!!)
   ==================================== */
.textblock {
    display: flex;
    flex-direction: column;
    justify-content: center;   /* <-- vertikal zentrieren */
    align-items: center;       /* <-- horizontal zentrieren */
    width: 100%;
    height: 100%;
}

/* ======== LOGO (fix) ======== */
.logo-wrapper {
    position: absolute;
    right: 10mm;
    bottom: 8mm;
}
.logo-wrapper img {
    width: 42mm;
    height: auto;
}

/* ======== PRINT ======== */
@media print {
    #topBar,
    #previewWrapper {
        display: none !important;
    }

    #printArea {
        display: flex !important;
    }

    @page {
        size: A5 landscape;
        margin: 0;
    }

    html, body {
        margin: 0 !important;
        padding: 0 !important;
        background: #ffffff !important;
        overflow: hidden !important;
    }
}
</style>
</head>

<body>

<!-- TOP-BAR -->
<div id="topBar">
    <button id="cancelBtn" class="btn">Zurück</button>
    <button id="printBtn"  class="btn">Drucken</button>
</div>

<!-- VORSCHAU -->
<div id="previewWrapper">
    <div id="previewArea" class="etikett">
        <div id="previewContent" class="textblock"></div>

        <div class="logo-wrapper">
            <img src="langen.png">
        </div>
    </div>
</div>

<!-- DRUCK -->
<div id="printArea" class="etikett">
    <div id="printContent" class="textblock"></div>

    <div class="logo-wrapper">
        <img src="langen.png">
    </div>
</div>

<script>
/* =====================================================
   1:1 AUS DEINER PC-VERSION (beschichtung.js)
   buildOutput() LOGIK (unverändert!)
   ===================================================== */

function buildLabel(beistell, type, kunde) {

    let html = "";

    // === ZEILE 1 (Beistellnummer) ===
    html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">${beistell}</div>`;

    // === ZEILE 2 + 3 (je nach Typ) ===
    switch(type) {

        case "LP":
            html += `<div style="font-size:60pt; font-weight:bold;">L&P</div>`;
            break;

        case "LPEILT":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">L&P</div>`;
            html += `<div style="font-size:60pt; font-weight:bold;">„EILT SEHR“</div>`;
            break;

        case "SCHUETTE":
            html += `<div style="font-size:60pt; font-weight:bold;">Schütte</div>`;
            break;

        case "SCHUETTEEILT":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Schütte</div>`;
            html += `<div style="font-size:60pt; font-weight:bold;">„EILT SEHR“</div>`;
            break;

        case "KLEY":
            html += `<div style="font-size:60pt; font-weight:bold;">Kleymann</div>`;
            break;

        case "KLEYEILT":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Kleymann</div>`;
            html += `<div style="font-size:60pt; font-weight:bold;">„EILT SEHR“</div>`;
            break;

        case "COMTEZN8":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Comte</div>`;
            html += `<div style="font-size:32pt; font-weight:bold;">„Zn8“</div>`;
            break;

        case "CHEMISCH":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Comte</div>`;
            html += `<div style="font-size:32pt; font-weight:bold;">„Chemisch Vernickeln“</div>`;
            break;

        case "DICK":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Comte</div>`;
            html += `<div style="font-size:32pt; font-weight:bold;">„Dickschichtpassivierung“</div>`;
            break;

        case "BLAU":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Comte</div>`;
            html += `<div style="font-size:32pt; font-weight:bold;">„Blau ZN8“</div>`;
            break;

        case "PENTZ":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Pentz & Gerdes</div>`;
            html += `<div style="font-size:32pt; font-weight:bold;">„ZN8“</div>`;
            break;

        case "RCS":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">RCS</div>`;
            html += `<div style="font-size:32pt; font-weight:bold;">„Schweißen“</div>`;
            break;

        case "COATINC":
            html += `<div style="font-size:60pt; font-weight:bold; margin-bottom:6mm;">Coatinc 24</div>`;
            html += `<div style="font-size:32pt; font-weight:bold;">„Verzinken“</div>`;
            break;

        default:
            html += `<div style="font-size:60pt; font-weight:bold;">&nbsp;</div>`;
            break;
    }

    // === ZEILE 4 (Kundenname) ===
    if (kunde) {
        html += `<div style="font-size:32pt; margin-top:6mm;">(${kunde})</div>`;
    }

    return html;
}

/* =====================================================
   DATEN LADEN + EINSETZEN
   ===================================================== */

window.onload = () => {

    const params = new URLSearchParams(location.search);

    let data = {};
    if (params.has("data")) {
        data = JSON.parse(decodeURIComponent(params.get("data")));
    }

    const beistell = data.beistell || "";
    const type     = data.selectedType || "";
    const kunde    = data.kundename || "";

    const html = buildLabel(beistell, type, kunde);

    document.getElementById("previewContent").innerHTML = html;
    document.getElementById("printContent").innerHTML   = html;

    // Zurück
    document.getElementById("cancelBtn").onclick = () => {
        window.location.href = "beschichtung_mobile.html";
    };

    // Drucken
    document.getElementById("printBtn").onclick = () => {
        window.print();
    };
};
</script>

</body>
</html>